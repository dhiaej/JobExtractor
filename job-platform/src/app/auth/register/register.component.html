<div class="register-container">
  <div class="register-background">
    <div class="geometric-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
    </div>
  </div>
  
  <div class="register-card">
    <div class="register-header">
      <div class="brand-logo">
        <mat-icon>work</mat-icon>
      </div>
      <h1 class="register-title">Join JobPlatform</h1>
      <p class="register-subtitle">Create your account and start your journey</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Full Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter your full name">
          <mat-icon matSuffix>person</mat-icon>
          <mat-error *ngIf="registerForm.get('name')?.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Email Address</mat-label>
          <input matInput type="email" formControlName="email" placeholder="Enter your email">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
            Email is required
          </mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
            Please enter a valid email
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Password</mat-label>
          <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" placeholder="Enter your password">
          <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
            Password is required
          </mat-error>
          <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
            Password must be at least 6 characters
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Confirm Password</mat-label>
          <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword" placeholder="Confirm your password">
          <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPassword">
            <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('required')">
            Please confirm your password
          </mat-error>
          <mat-error *ngIf="registerForm.hasError('passwordMismatch')">
            Passwords do not match
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>I am a...</mat-label>
          <mat-select formControlName="role">
            <mat-option value="OFFERER">
              <div class="role-option">
                <mat-icon>business</mat-icon>
                <div>
                  <div class="role-title">Job Offerer</div>
                  <div class="role-description">Hiring talent for my company</div>
                </div>
              </div>
            </mat-option>
            <mat-option value="SEEKER">
              <div class="role-option">
                <mat-icon>person</mat-icon>
                <div>
                  <div class="role-title">Job Seeker</div>
                  <div class="role-description">Looking for opportunities</div>
                </div>
              </div>
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>work</mat-icon>
          <mat-error *ngIf="registerForm.get('role')?.hasError('required')">
            Please select a role
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="registerForm.invalid || isLoading" class="register-btn">
          <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
          <mat-icon *ngIf="!isLoading">person_add</mat-icon>
          <span>{{ isLoading ? 'Creating Account...' : 'Create Account' }}</span>
        </button>
      </div>


      <div class="error-message" *ngIf="errorMessage">
        <mat-icon>error</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>

      <div class="form-footer">
        <p class="login-link">
          Already have an account? 
          <button mat-button color="primary" (click)="navigateToLogin()" class="link-button">Sign in here</button>
        </p>
        <button mat-button (click)="navigateToLanding()" class="home-link">
          <mat-icon>home</mat-icon>
          Back to Home
        </button>
      </div>
    </form>
  </div>
</div>
